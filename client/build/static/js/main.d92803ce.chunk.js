(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{172:function(e,t,a){e.exports=a.p+"static/media/googleLogo.e99543bb.svg"},182:function(e,t,a){e.exports=a.p+"static/media/GoogleGLogo.3ec228d3.svg"},212:function(e,t,a){e.exports=a(425)},424:function(e,t,a){},425:function(e,t,a){"use strict";a.r(t);var n=a(6),o=a(7),i=a(9),c=a(8),r=a(10),s=a(1),l=a.n(s),p=a(45),u=a.n(p),d=a(33),m=a(16),h=a.n(m),g=a(169),y=a.n(g),f=a(13),x=a.n(f),b=a(34),E=(a(104),a(170),a(70)),v=a(185),C=a(37),O=a.n(C);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var w=new v.a,k=O()().add(1,"week").toDate();function I(e,t,a){var n={path:"/",expires:k,maxAge:1e3,httpOnly:!1,sameSite:!0};Object.assign(n,a),w.set(e,t,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach(function(t){Object(E.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},n))}function S(e){return w.get(e)}var D={container:{width:"730px",height:"150px",display:"flex",alignItems:"center",backgroundColor:"#fff",boxShadow:"0px 3px 117px -26px rgba(204,204,204,1)",borderRadius:"10px",position:"relative",marginBottom:"30px"},imageContainer:{width:"30%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},bankImage:{width:"60%",height:"60%"},detailsContainer:{display:"flex",flexDirection:"column"},accountName:{margin:"0px"},bankName:{margin:"0px"},accountDetailsContainer:{display:"flex",marginTop:"20px"},sortCodeContainer:{marginRight:"20px"},label:{fontSize:"12px",fontWeight:"300",margin:"0px",marginBottom:"5px"},accountDetail:{margin:"0px"},balanceContainer:{width:"200px",position:"absolute",right:"0px",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},h1:{margin:"0px"},balanceBubble:{display:"flex",alignItems:"center",justifyContent:"center",width:"fit-content",height:"fit-content",background:"#F2F2F2",padding:"10px",borderRadius:"10px"}},_=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(o.a)(t,[{key:"showAccountDetails",value:function(){if(this.props.accountNumber&&this.props.sortCode)return l.a.createElement("div",{style:D.accountDetailsContainer},l.a.createElement("div",{style:D.sortCodeContainer},l.a.createElement("p",{style:D.label},"SORT CODE"),l.a.createElement("h6",{style:D.accountDetail},this.props.sortCode)),l.a.createElement("div",{style:D.accountNumberContainer},l.a.createElement("p",{style:D.label},"ACCOUNT NUMBER"),l.a.createElement("h6",{style:D.accountDetail},this.props.accountNumber)))}},{key:"render",value:function(){return l.a.createElement("div",{style:D.container},l.a.createElement("div",{style:D.imageContainer},l.a.createElement("img",{style:D.bankImage,src:this.props.bankImage,alt:"bank logo"})),l.a.createElement("div",{stlye:D.detailsContainer},l.a.createElement("h5",{style:D.bankName},this.props.bankName),l.a.createElement("h2",{style:D.accountName},this.props.accountName),this.showAccountDetails()),l.a.createElement("div",{style:D.balanceContainer},l.a.createElement("div",{style:D.balanceBubble},l.a.createElement("h1",{style:D.h1},"\xa3"),l.a.createElement("h1",{style:D.h1},this.props.balance.toFixed(2)))))}}]),t}(s.Component),A=a(171),T=a.n(A),N={heatMapContainer:{width:"300px",height:"fit-content",paddingTop:"20px",paddingBottom:"20px",paddingLeft:"20px",paddingRight:"5px",borderRadius:"10px",boxShadow:"0px 3px 117px -26px rgba(204,204,204,1)",backgroundColor:"#ffffff",transition:"all 0.3s ease-out"},heatMapContainerLoading:{width:"300px",height:"fit-content",paddingTop:"20px",paddingBottom:"20px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"10px",boxShadow:"0px 3px 117px -26px rgba(204,204,204,1)",backgroundColor:"#ffffff",transition:"all 0.3s ease-out"},heatMapTransactionViewContainer:{width:"100%",display:"flex",justifyContent:"space-between"}},R=(a(245),{transactionViewContainer:{width:"700px",height:"500px",padding:"20px",borderRadius:"10px",boxShadow:"0px 3px 117px -26px rgba(204,204,204,1)",backgroundColor:"#ffffff",overflowY:"scroll",display:"flex",flexDirection:"column",alignItems:"center",boxSizing:"border-box"},transactionViewContainerEmpty:{width:"700px",height:"450px",padding:"20px",display:"flex",alignItems:"center",justifyContent:"center"},transactionViewEmptyPrompt:{fontWeight:"300",color:"#777777"},transactionContainer:{width:"100%",boxSizing:"border-box",padding:"0px 20px",minHeight:"60px",borderRadius:"10px",marginBottom:"20px",boxShadow:"0px 3px 117px -26px rgba(204,204,204,1)",position:"relative",display:"flex",alignItems:"center",backgroundColor:"#f7f7f7"},transactionAmount:{display:"flex",alignItems:"center",justifyContent:"center",width:"fit-content",height:"fit-content",borderRadius:"10px",padding:"5px"},transactionLabel:{display:"flex",flexDirection:"column"},categories:{margin:"0px",fontSize:"12px",fontWeight:"300",marginTop:"5px"},merchantName:{margin:"0px"},amountRed:{color:"#e74c3c",position:"absolute",right:"20px",margin:"0px"},amountGreen:{color:"#7bc74d",position:"absolute",right:"20px",margin:"0px"}}),F=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(o.a)(t,[{key:"renderLabel",value:function(e){return void 0!==e.merchant_name?e.merchant_name+" ("+e.transaction_type+") - "+e.timestamp.substring(11,19):"pot"===e.description.substring(0,3)?Math.abs(e.amount)<1?"PURCHASE ROUND UP SENT TO POT - "+e.timestamp.substring(11,19):(e.amount<0?"MONEY SENT TO SAVINGS POT":"MONEY MOVED FROM SAVINGS POT")+" - "+e.timestamp.substring(11,19):e.description.toUpperCase()+" ("+e.transaction_type+") - "+e.timestamp.substring(11,19)}},{key:"render",value:function(){return l.a.createElement("div",{style:R.transactionContainer},l.a.createElement("div",{style:R.transactionLabel},l.a.createElement("h4",{style:R.merchantName},this.renderLabel(this.props.transaction)),l.a.createElement("p",{style:R.categories},x.a.isEmpty(this.props.transaction.transaction_classification)?"":this.props.transaction.transaction_classification.join(", ").toUpperCase())),l.a.createElement("div",{style:R.transactionAmount},this.props.transaction.amount<0?l.a.createElement("h2",{style:R.amountRed},"- \xa3",(-1*this.props.transaction.amount).toFixed(2)):l.a.createElement("h2",{style:R.amountGreen},"+ \xa3",this.props.transaction.amount.toFixed(2))))}}]),t}(s.Component),L=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={transactions:a.props.data},a}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return x.a.isEmpty(this.state.transactions)?l.a.createElement("div",{style:R.transactionViewContainerEmpty},l.a.createElement("h3",{style:R.transactionViewEmptyPrompt},"Try clicking on a day on the heatmap to the left!")):l.a.createElement("div",{style:R.transactionViewContainer},l.a.createElement("h3",{style:R.transactionDate},O()(this.state.transactions[0].timestamp.substring(0,10)).format("dddd, Do MMMM YYYY")),this.state.transactions.slice(0).reverse().map(function(e){return l.a.createElement(F,{transaction:e,key:x.a.uniqueId("transaction_")})}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.data!==t.transactions?{transactions:e.data}:t}}]),t}(s.Component),P=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"loadingAnimationContainer"},l.a.createElement("div",{className:"box1"}),l.a.createElement("div",{className:"box2"}),l.a.createElement("div",{className:"box3"}))}}]),t}(s.Component),B=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={accountIdNeeded:!0,accountId:"",transactionData:[],startDate:O()().subtract(3,"months"),endDate:O()(),transactionViewData:[]},a}return Object(r.a)(t,e),Object(o.a)(t,[{key:"callApiForTransactions",value:function(e,t){var a=this;h.a.get("/transactions?accountId=".concat(e,"&google_id=").concat(t)).then(function(e){a.setState({transactionData:Object.keys(e.data).map(function(t){return e.data[t]}),accountIdNeeded:!1})}).catch(function(e){console.log(e)})}},{key:"getTransactionData",value:function(){var e=S("snapshot_user_account").google_id;this.callApiForTransactions(this.state.accountId,e)}},{key:"componentDidUpdate",value:function(){this.state.accountIdNeeded||this.getTransactionData()}},{key:"squareClick",value:function(e){this.setState({transactionViewData:e.transactions})}},{key:"render",value:function(){var e=this;return x.a.isEmpty(this.state.transactionData)?l.a.createElement("div",{style:N.heatMapTransactionViewContainer},l.a.createElement("div",{style:N.heatMapContainerLoading},l.a.createElement(P,null)),l.a.createElement("div",{style:N.transactionViewContainer},l.a.createElement(L,{data:this.state.transactionViewData}))):l.a.createElement("div",{style:N.heatMapTransactionViewContainer},l.a.createElement("div",{style:N.heatMapContainer},l.a.createElement(T.a,{startDate:this.state.startDate,endDate:this.state.endDate,values:this.state.transactionData,showWeekdayLabels:!0,horizontal:!1,classForValue:function(e){return e?e.count>=1&&e.count<=4?"color-square color-scale-".concat(e.count):"color-square color-scale-4":"color-empty"},onClick:function(t){x.a.isEmpty(t)||e.squareClick(t)}})),l.a.createElement("div",{style:N.transactionViewContainer},l.a.createElement(L,{data:this.state.transactionViewData})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.accountIdNeeded&&e.accountId!==t.accountId&&void 0!==e.accountId?{accountId:e.accountId,accountIdNeeded:!1}:t}}]),t}(s.Component),M={displayContainer:{width:"25%",height:"170px",backgroundColor:"#fff",boxShadow:"0px 3px 117px -26px rgba(204,204,204,1)",borderRadius:"10px",padding:"15px",marginBottom:"30px"},balanceLabel:{margin:"0px",marginBottom:"5px",fontWeight:"300",fontSize:"16px"},balanceContainer:{display:"flex",width:"100%",height:"90%",alignItems:"center",justifyContent:"center"},balanceNumber:{fontSize:"50px"}},V=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={balanceReady:!1,accountsRecieved:!1,accountsArray:a.props.accounts,balance:0},a}return Object(r.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){this.setBalance()}},{key:"setBalance",value:function(){this.state.accountsRecieved&&this.setState({balanceReady:!0,accountsRecieved:!1,balance:this.calcBalance()})}},{key:"calcBalance",value:function(){var e=0;return this.state.accountsArray.forEach(function(t){e+=t.balance.current}),e}},{key:"render",value:function(){return l.a.createElement("div",{style:M.displayContainer},l.a.createElement("p",{style:M.balanceLabel},"COMBINED ACCOUNT BALANCE:"),l.a.createElement("div",{style:M.balanceContainer},this.state.balanceReady?l.a.createElement("h1",{style:M.balanceNumber},"\xa3",this.state.balance.toFixed(2)):l.a.createElement(P,null)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.accounts!==t.accountsArray?{accountsArray:e.accounts,accountsRecieved:!0}:t}}]),t}(s.Component),W={pageContainer:{width:"100vw",height:"100vh",margin:"0px",padding:"0px",position:"relative"},pageContentContainer:{position:"relative",width:"1280px",margin:"0 auto",padding:"0px",paddingTop:"50px",display:"flex",justifyContent:"center"}},z=a(18),G=a(19),U={navContainer:{width:"100vw",height:"70px",display:"flex",alignItems:"center",position:"relative"},logo:{color:"#7A9E7E"},logoContainer:{position:"absolute",left:"40px",display:"flex"},logoText:{fontWeight:"300",fontSize:"32px",margin:"0px",marginLeft:"10px",color:"#7A9E7E"},loginContainer:{position:"absolute",right:"0px",height:"100%",width:"350px",display:"flex",alignItems:"center",justifyContent:"center"},loginButton:{width:"250px",height:"40px",borderRadius:"5px",border:"1px solid #ccc",display:"flex",alignItems:"center",justifyContent:"center"},loginButtonText:{fontWeight:"300"},googleLogo:{width:"60px",marginTop:"4px",marginLeft:"5px"},profileContainer:{width:"150px",height:"60px",position:"absolute",right:"50px",display:"flex",alignItems:"center",justifyContent:"space-around"},avatar:{width:"40px",height:"40px",borderRadius:"10px"},nameContainer:{width:"100px",height:"100%",display:"flex"}},q=a(172),Y=a.n(q),H=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(this.props.loginButton)return l.a.createElement("div",{style:U.navContainer},l.a.createElement("div",{style:U.logoContainer},l.a.createElement(z.a,{style:U.logo,icon:G.a,size:"2x"}),l.a.createElement("h2",{style:U.logoText},"snapshot")),l.a.createElement("div",{style:U.loginContainer},l.a.createElement("div",{class:"loginButton",style:U.loginButton},l.a.createElement("h4",{style:U.loginButtonText},"Login with "),l.a.createElement("img",{style:U.googleLogo,src:Y.a,alt:"google logo"}))));if(void 0!==S("snapshot_user_account")){var e=S("snapshot_user_account");return l.a.createElement("div",{style:U.navContainer},l.a.createElement("div",{style:U.logoContainer},l.a.createElement(z.a,{style:U.logo,icon:G.a,size:"2x"}),l.a.createElement("h2",{style:U.logoText},"snapshot")),l.a.createElement("div",{style:U.profileContainer},l.a.createElement("div",{style:U.pictureContainer},l.a.createElement("img",{src:e.picture_uri,style:U.avatar,alt:"user avatar"})),l.a.createElement("div",{style:U.nameContainer},l.a.createElement("h3",null,e.first_name),l.a.createElement("h3",null,e.last_name))))}return l.a.createElement("div",{style:U.navContainer},l.a.createElement("div",{style:U.logoContainer},l.a.createElement(z.a,{style:U.logo,icon:G.a,size:"2x"}),l.a.createElement("h2",{style:U.logoText},"snapshot")))}}]),t}(s.Component),K={container:{maxWidth:"400px",width:"275px",height:"400px",backgroundColor:"#7a9e7e",borderRadius:"10px",marginRight:"30px",position:"sticky",top:"150px",marginTop:"150px",boxShadow:"0px 3px 117px -26px rgba(204,204,204,1)",display:"flex",alignItems:"center",flexDirection:"column",boxSizing:"border-box",padding:"20px 20px"},selectedIcon:{color:"#7A9E7E"},nonSelectedIcon:{color:"#FFFFFF"},nonSelected:{margin:"10px 0",display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",color:"#FFF"},selected:{color:"#7a9e7e",width:"40px",height:"40px",padding:"10px",backgroundColor:"#fff",borderRadius:"50%",margin:"10px 0",display:"flex",alignItems:"center",justifyContent:"center"}},J=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={currentSection:"Accounts"},a}return Object(r.a)(t,e),Object(o.a)(t,[{key:"scrollTo",value:function(e){"Accounts"===e?b.animateScroll.scrollToTop():b.scroller.scrollTo(e,{duration:800,delay:50,smooth:!0}),this.setState({currentSection:e})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:K.container},l.a.createElement("div",{style:"Accounts"===this.state.currentSection?K.selected:K.nonSelected},l.a.createElement(z.a,{className:"menuItem",icon:G.b,size:"2x",style:"Accounts"===this.state.currentSection?K.selectedIcon:K.nonSelectedIcon,onClick:function(){return e.scrollTo("Accounts")}})),l.a.createElement("div",{style:"Transactions"===this.state.currentSection?K.selected:K.nonSelected},l.a.createElement(z.a,{className:"menuItem",icon:G.d,size:"2x",style:"Transactions"===this.state.currentSection?K.selectedIcon:K.nonSelectedIcon,onClick:function(){return e.scrollTo("Transactions")}})),l.a.createElement("div",{style:"DailySpendChart"===this.state.currentSection?K.selected:K.nonSelected},l.a.createElement(z.a,{className:"menuItem",icon:G.e,size:"2x",style:"DailySpendChart"===this.state.currentSection?K.selectedIcon:K.nonSelectedIcon,onClick:function(){return e.scrollTo("DailySpendChart")}})),l.a.createElement("div",{style:"RecurringPayments"===this.state.currentSection?K.selected:K.nonSelected},l.a.createElement(z.a,{className:"menuItem",icon:G.c,size:"2x",style:"RecurringPayments"===this.state.currentSection?K.selectedIcon:K.nonSelectedIcon,onClick:function(){return e.scrollTo("RecurringPayments")}})))}}]),t}(s.Component),Q=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.props.navigation?l.a.createElement("div",{style:W.pageContainer},l.a.createElement(H,{loginButton:this.props.loginButton}),l.a.createElement("div",{style:W.pageContentContainer},l.a.createElement(J,null),this.props.children)):l.a.createElement("div",{style:W.pageContainer},l.a.createElement("div",{style:W.pageContentContainer},this.props.children))}}]),t}(s.Component),X={sectionTitleContainer:{width:"100%",height:"150px",display:"flex",alignItems:"center"},sectionTitle:{marginLeft:"30px",fontSize:"36px",fontWeight:"300",color:"#7A9E7E"}},Z=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{style:X.sectionTitleContainer},l.a.createElement("h1",{style:X.sectionTitle},this.props.title))}}]),t}(s.Component),$=a(39),ee={chartContainer:{width:"100%",height:"300px",borderRadius:"10px",backgroundColor:"#FFFFFF",boxShadow:"0px 3px 117px -26px rgba(204,204,204,1)",display:"flex",alignItems:"center"},chartContainerEmpty:{width:"100%",height:"300px",borderRadius:"10px",backgroundColor:"#FFFFFF",boxShadow:"0px 3px 117px -26px rgba(204,204,204,1)",display:"flex",alignItems:"center",justifyContent:"center"}},te=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={accountId:"",accountIdNeeded:!0,dailySpendData:[]},a}return Object(r.a)(t,e),Object(o.a)(t,[{key:"getDailySpendData",value:function(){var e=this,t=S("snapshot_user_account").google_id;h.a.get("/averageSpendDaily?accountId=".concat(this.state.accountId,"&google_id=").concat(t)).then(function(t){e.setState({dailySpendData:t.data,accountIdNeeded:!1})}).catch(function(e){console.log("ERROR: ",e)})}},{key:"componentDidUpdate",value:function(){this.state.accountIdNeeded||this.getDailySpendData()}},{key:"areaChart",value:function(){return l.a.createElement($.b,{width:1050,height:250,data:this.state.dailySpendData.reverse(),margin:{top:10,bottom:10,left:10,right:10}},l.a.createElement("defs",null,l.a.createElement("linearGradient",{id:"colorAvgSpend",x1:"0",y1:"0",x2:"0",y2:"1"},l.a.createElement("stop",{offset:"5%",stopColor:"#44a340",stopOpacity:.8}),l.a.createElement("stop",{offset:"95%",stopColor:"#44a340",stopOpacity:0}))),l.a.createElement($.e,{dataKey:"date"}),l.a.createElement($.f,{dataKey:"average_spend"}),l.a.createElement($.c,{strokeDasharray:"3 3"}),l.a.createElement($.d,null),l.a.createElement($.a,{type:"monotone",dataKey:"average_spend",stroke:"#44a340",fillOpacity:1,fill:"url(#colorAvgSpend)"}))}},{key:"render",value:function(){return x.a.isEmpty(this.state.dailySpendData)?l.a.createElement("div",{style:ee.chartContainerEmpty},l.a.createElement(P,null)):l.a.createElement("div",{style:ee.chartContainer},this.areaChart())}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.accountIdNeeded&&e.accountId!==t.accountId&&void 0!==e.accountId?{accountId:e.accountId,accountIdNeeded:!1}:t}}]),t}(s.Component),ae={container:{width:"100%",height:"fit-content",display:"flex",flexDirection:"column"},paymentContainer:{width:"95%",minHeight:"100px",display:"flex",alignItems:"center",justifyContent:"space-around",backgroundColor:"#f7f7f7",borderRadius:"10px",margin:"10px 0px"},classification:{fontWeight:"300",color:"#7A9E7E"},classificationContainer:{width:"calc(100% - 25px)",height:"fit-content",padding:"15px 0px",paddingLeft:"25px",borderRadius:"10px",backgroundColor:"#FFFFFF",boxShadow:"0px 3px 117px -26px rgba(204,204,204,1)",margin:"30px 0px"},paymentLabel:{fontWeight:"300"},containerEmpty:{width:"100%",height:"300px",display:"flex",alignItems:"center",justifyContent:"center"},paymentStatistic:{display:"flex",flexDirection:"column",alignItems:"center"},paymentData:{marginTop:"0px"},totalSpent:{height:"98%",borderRadius:"10px",padding:"0 15px",backgroundColor:"#7A9E7E",color:"#FFFFFF"}};function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(a,!0).forEach(function(t){Object(E.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ie=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{style:ae.paymentContainer,key:x.a.uniqueId("payment_s")},l.a.createElement("div",null,l.a.createElement("h4",{style:ae.paymentLabel},"MERCHANT"),l.a.createElement("h3",{style:ae.paymentData},this.props.data.name_of_merchant)),l.a.createElement("div",{style:ae.paymentStatistic},l.a.createElement("h4",{style:ae.paymentLabel},"TOTAL PAYMENTS"),l.a.createElement("h3",{style:ae.paymentData},this.props.data.number_of_transactions)),l.a.createElement("div",{style:ae.paymentStatistic},l.a.createElement("h4",{style:ae.paymentLabel},"AVERAGE PAYMENT"),l.a.createElement("h3",{style:ae.paymentData},"\xa3",this.props.data.average_amount_spent)),l.a.createElement("div",{style:ae.paymentStatistic},l.a.createElement("h4",{style:ae.paymentLabel},"AVERAGE INTERVAL"),l.a.createElement("h3",{style:ae.paymentData},this.props.data.average_interval," days")),l.a.createElement("div",{style:oe({},ae.totalSpent,{},ae.paymentStatistic)},l.a.createElement("h4",{style:ae.paymentLabel},"TOTAL SPENT"),l.a.createElement("h3",{style:ae.paymentData},"\xa3",this.props.data.total_amount_spent)))}}]),t}(s.Component),ce=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return Array.isArray(this.props.data)?l.a.createElement("div",{style:ae.classificationContainer},l.a.createElement("h2",{style:ae.classification},this.props.data[0].classification),l.a.createElement("div",{style:ae.paymentsContainer},this.props.data.map(function(e){return l.a.createElement(ie,{data:e,key:x.a.uniqueId("payment_")})}))):l.a.createElement("div",{style:ae.classificationContainer},l.a.createElement("h2",{style:ae.classification},this.props.data.classification),l.a.createElement(ie,{data:this.props.data}))}}]),t}(s.Component),re=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={accountId:"",accountIdNeeded:!0,paymentData:[]},a}return Object(r.a)(t,e),Object(o.a)(t,[{key:"getPaymentData",value:function(){var e=this,t=S("snapshot_user_account").google_id;h.a.get("/recurringPayments?accountId=".concat(this.state.accountId,"&google_id=").concat(t)).then(function(t){var a=[];e.objectMap(t.data,function(e,t){Array.isArray(e)?e[0].classification=t:e.classification=t,a.push(e)}),e.setState({paymentData:a,accountIdNeeded:!1})}).catch(function(e){console.log("ERROR: ",e)})}},{key:"componentDidUpdate",value:function(){this.state.accountIdNeeded||this.getPaymentData()}},{key:"objectMap",value:function(e,t){return Object.keys(e).reduce(function(a,n){return a[n]=t(e[n],n),a},{})}},{key:"render",value:function(){return x.a.isEmpty(this.state.paymentData)?l.a.createElement("div",{style:ae.containerEmpty},l.a.createElement(P,null)):l.a.createElement("div",{style:ae.container},this.state.paymentData.map(function(e){return l.a.createElement(ce,{data:e,key:x.a.uniqueId("classification_")})}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.accountIdNeeded&&e.accountId!==t.accountId&&void 0!==e.accountId?{accountId:e.accountId,accountIdNeeded:!1}:t}}]),t}(s.Component),se={container:{display:"flex",flexWrap:"wrap",justifyContent:"center"},accountsContainer:{width:"730px",height:"fit-content",minHeight:"540px",marginBottom:"30px",paddingLeft:"65px",transition:"all 0.3s"},accountsLoadingContainer:{width:"730px",height:"fit-content",minHeight:"540px",marginBottom:"30px",paddingLeft:"65px",transition:"all 0.3s",display:"flex",alignItems:"center",justifyContent:"center"}},le=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={accounts:[],heatmap_account_id:"",tl_code:y.a.parse(e.location.search)["?code"],stored_accounts:[]},void 0===S("snapshot_user_account")&&window.history.push("/login"),a}return Object(r.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=S("snapshot_user_account").google_id;if(void 0!==this.state.tl_code){var a="/getTrueLayerAccessToken?code=".concat(this.state.tl_code,"&google_id=").concat(t);h.a.get(a).then(function(a){e.loadAccounts(t)}).catch(function(e){console.log(e)})}else this.loadAccounts(t)}},{key:"componentDidUpdate",value:function(){void 0===S("snapshot_user_account")&&window.history.push("/login")}},{key:"loadAccounts",value:function(e){var t=this;h.a.get("/loadAccounts?google_id=".concat(e)).then(function(e){t.setState({accounts:e.data,heatmap_account_id:e.data[0].account_id})}).catch(function(e){console.log(e)})}},{key:"renderAccounts",value:function(){return x.a.isEmpty(this.state.accounts)?l.a.createElement("div",{style:se.accountsLoadingContainer},l.a.createElement(P,null)):(console.log(this.state.accounts),l.a.createElement("div",{style:se.accountsContainer},this.state.accounts.map(function(e){return l.a.createElement(_,{bankImage:e.provider.logo_uri,bankName:e.provider.display_name,accountName:e.display_name,sortCode:e.account_number.sort_code,accountNumber:e.account_number.number,balance:e.balance.current,key:x.a.uniqueId("account_")})})))}},{key:"pageCompile",value:function(){return l.a.createElement("div",{style:se.container},l.a.createElement(Z,{title:"Accounts & Balance"}),l.a.createElement(b.Element,{name:"Accounts"}),l.a.createElement(V,{accounts:this.state.accounts}),this.renderAccounts(),l.a.createElement(Z,{title:"Transactions"}),l.a.createElement(b.Element,{name:"Transactions"}),l.a.createElement(B,{accountId:this.state.heatmap_account_id}),l.a.createElement(Z,{title:"Average Daily Spend"}),l.a.createElement(b.Element,{name:"DailySpendChart"}),l.a.createElement(te,{accountId:void 0!==this.state.accounts[0]?this.state.accounts[0].account_id:""}),l.a.createElement(Z,{title:"Repeated Payments"}),l.a.createElement(b.Element,{name:"RecurringPayments"}),l.a.createElement(re,{accountId:void 0!==this.state.accounts[0]?this.state.accounts[0].account_id:""}))}},{key:"render",value:function(){return l.a.createElement(Q,{navigation:!0},this.pageCompile())}}]),t}(s.Component),pe=a(103),ue=a(181),de=a.n(ue),me={loginContainer:{width:"400px",height:"600px",borderRadius:"10px",boxShadow:"0px 3px 117px -26px rgba(204,204,204,1)",background:"#fff",display:"flex",justifyContent:"center",flexDirection:"row"},Logo:{color:"#7A9E7E",marginBottom:"25px"},googleBox:{width:"fit-content",height:"fit-content",display:"flex",alignItems:"center",justifyIontent:"center",padding:"5px",background:"#fff",borderRadius:"50%",marginLeft:"5px",position:"absolute",left:"10px"},leftTitle:{fontSize:"50px",color:"#fff",fontWeight:"300",marginTop:"10px"},right:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},loginTitle:{fontWeight:"300",fontSize:"30px",margin:"0px"},loginWithGoogleButton:{position:"relative",width:"300px",height:"40px",borderRadius:"5px",boxShadow:"0px 3px 117px -26px rgba(204,204,204,1)",background:"#7A9E7E",display:"flex",alignItems:"center",justifyContent:"center"},googleLogo:{width:"18px"},loginText:{width:"300px",fontWeight:"300",textAlign:"center"},or:{fontWeight:"300",color:"#bbb"},trueLayerButton:{position:"relative",width:"300px",height:"40px",borderRadius:"5px",boxShadow:"0px 3px 117px -26px rgba(204,204,204,1)",background:"#7A9E7E",display:"flex",alignItems:"center",justifyContent:"center"},viewAccount:{fontWeight:"500",color:"#fff",textDecoration:"none"},loginWith:{fontWeight:"500",color:"#fff"},buttonLogo:{color:"#fff",marginLeft:"10px",position:"absolute",left:"10px"}},he=a(182),ge=a.n(he),ye=function(e){function t(e){var a;return Object(n.a)(this,t),a=Object(i.a)(this,Object(c.a)(t).call(this,e)),void 0!==S("snapshot_user_account")&&window.history.push("/myAccounts"),a}return Object(r.a)(t,e),Object(o.a)(t,[{key:"responseGoogle",value:function(e){var t={code:e.code};console.log("The response: ",e),h.a.post("/googleOAuthTokenHandler",t).then(function(e){I("snapshot_user_account",{first_name:e.data.first_name,last_name:e.data.last_name,picture_uri:e.data.picture_uri,google_id:e.data.google_id}),e.hasAccounts?window.history.push("/myAccounts"):window.history.push(e.data.redirect_url)}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return l.a.createElement(Q,{loginButton:!1},l.a.createElement("div",{style:me.loginContainer},l.a.createElement("div",{style:me.right},l.a.createElement(z.a,{icon:G.a,style:me.Logo,size:"7x"}),l.a.createElement("h1",{style:me.loginTitle},"Welcome to snapshot"),l.a.createElement("p",{style:me.loginText},"Login with google to save account data and view multiple accounts"),l.a.createElement(de.a,{clientId:"968944964829-rfe2o348c3r5ne4tfge7ahc7pv42cc8g.apps.googleusercontent.com",responseType:"code",render:function(e){return l.a.createElement("div",{className:"loginButton",style:me.loginWithGoogleButton,onClick:e.onClick},l.a.createElement("div",{style:me.googleBox},l.a.createElement("img",{style:me.googleLogo,src:ge.a,alt:"google logo"})),l.a.createElement("p",{style:me.loginWith},"Login with Google"))},onSuccess:this.responseGoogle,onFailure:this.responseGoogle,cookiePolicy:"single_host_origin"}),l.a.createElement("p",{style:me.or},"or skip logging in and"),l.a.createElement(pe.a,{to:"/myAccounts"},l.a.createElement("div",{className:"loginButton",style:me.trueLayerButton},l.a.createElement("p",{style:me.viewAccount},"View my account"),l.a.createElement(z.a,{icon:G.a,style:me.buttonLogo}))))))}}]),t}(s.Component),fe=(a(424),function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement(d.c,null,l.a.createElement(d.a,{name:"Landing",path:"/",exact:!0,component:le}),l.a.createElement(d.a,{name:"Login",path:"/login",component:ye}),l.a.createElement(d.a,{name:"MyAccounts",path:"/myAccounts",component:le}),l.a.createElement(d.a,{component:le}))}}]),t}(s.Component));u.a.render(l.a.createElement(fe,null),document.getElementById("root"))}},[[212,1,2]]]);
//# sourceMappingURL=main.d92803ce.chunk.js.map